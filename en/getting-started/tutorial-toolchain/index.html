<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="search" title="Search" href="../../search/" /><link rel="next" title="Understanding rebuilds" href="../rebuilds/" /><link rel="prev" title="Tutorial “An SDL example”" href="../tutorial-sdl/" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>Tutorial “A toolchain example” - releng-tool documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=ddcdc2ba" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../"><div class="brand">releng-tool  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../">
  

<div class="sidebar-logo-container">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7 8.02" class="sidebar-logo" alt="releng-tool">
        <path d="M3.48 0a.2.2 0 0 0-.01 0 .2.2 0 0 0-.1.04l-1.6.93a.2.2 0 0 0-.05.03l-1.6.92a.2.2 0 0 0-.01.01.2.2 0 0 0-.02.01.2.2 0 0 0-.02.02.2.2 0 0 0-.02.01V2a.2.2 0 0 0-.03 0 .2.2 0 0 0-.02.04.2.2 0 0 0 0 .02v.01a.2.2 0 0 0 0 .03.2.2 0 0 0 0 .02.2.2 0 0 0 0 .02V5.9c0 .04 0 .07.02.1v.02a.2.2 0 0 0 .02.04l.08.05 3.25 1.88h.01V8h.02l.01.02a.2.2 0 0 0 .12.01.2.2 0 0 0 .02 0h.02A.2.2 0 0 0 3.61 8h.02l3.24-1.9a.2.2 0 0 0 .1-.07V6l.01-.02A.2.2 0 0 0 7 5.9V2.14a.2.2 0 0 0 0-.02.2.2 0 0 0 0-.02.2.2 0 0 0 0-.03.2.2 0 0 0-.01-.02.2.2 0 0 0-.07-.1H6.9l-.01-.01h-.01v-.01h-.02L3.62.05A.2.2 0 0 0 3.48 0Zm.02.43 2.9 1.68-1.26.72-2.91-1.67Zm-1.65.95 2.91 1.68-1.26.73L.6 2.1ZM.4 2.45l2.9 1.68v3.36L.4 5.8Zm6.2 0v3.36L3.7 7.49V4.13Z" style="fill:var(--color-foreground-primary)"/>
    </svg>
</div>


</a><form class="sidebar-search-container" method="get" action="../../search/" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../requirements/">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../getting-started/">Getting started</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Getting started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../prelude/">Prelude</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../tutorials/">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../tutorial-basic/">Tutorial “Basic packages”</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial-sdl/">Tutorial “An SDL example”</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Tutorial “A toolchain example”</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rebuilds/">Understanding rebuilds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fetching/">Understanding fetching</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../guides/guides/">User guides</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of User guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../guides/arguments/">Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/configuration/">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/environment/">Environment variables</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/packages/packages/">Packages</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Packages</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/common-pkg-options/">Common options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/advanced-pkg-options/">Advanced options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/system-pkg-options/">System-specific options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/bootstrapping/">Bootstrapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/post-processing/">Post-processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/site-definitions/">Site definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/hash-file/">Hash file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/ascii-armor/">ASCII armor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/pkg-type-script/">Script package (default)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/pkg-type-autotools/">Autotools package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/pkg-type-cargo/">Cargo package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/pkg-type-cmake/">CMake package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/pkg-type-make/">Make package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/pkg-type-meson/">Meson package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/pkg-type-python/">Python package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/pkg-type-scons/">SCons package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/packages/deprecated-pkg-options/">Deprecated options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/post-processing/">Post-processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/script-helpers/">Script helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/licenses/">Licenses</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/tips/tips/">Tips</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Tips</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/tips/offline-builds/">Offline builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/tips/parallel-builds/">Parallel builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/tips/privileged-builds/">Privileged builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/tips/license-generation/">License generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/tips/alternative-extensions/">Alternative extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/tips/vcs-ignore/">VCS Ignore</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/advanced-guides/">Advanced</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Advanced</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/patching/">Patching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/intern-extern-pkgs/">Internal/external packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/development-mode/">Development mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/local-sources-mode/">Local-sources mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/configuration-overrides/">Configuration overrides</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../guides/quirks/quirks/">Quirks</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Quirks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-bzr-certifi/">releng.bzr.certifi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-cmake-disable_direct_includes/">releng.cmake.disable_direct_includes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-cmake-disable_parallel_option/">releng.cmake.disable_parallel_option</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-disable_local_site_warn/">releng.disable_local_site_warn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-disable_prerequisites_check/">releng.disable_prerequisites_check</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-disable_remote_configs/">releng.disable_remote_configs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-disable_remote_scripts/">releng.disable_remote_scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-disable_spdx_check/">releng.disable_spdx_check</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-git-no_depth/">releng.git.no_depth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-git-no_quick_fetch/">releng.git.no_quick_fetch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-git-replicate_cache/">releng.git.replicate_cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-log-execute_args/">releng.log.execute_args</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-log-execute_env/">releng.log.execute_env</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/quirks/quirk-stats-no_pdf/">releng.stats.no_pdf</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/extensions/extensions/">Extensions</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Extensions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/extensions/making-a-custom-post-build-action/">Making a custom post-build action extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/extensions/making-a-custom-package-type/">Making a custom package type extension</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help/">Requesting help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributors/">Contributor guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../annex-a/">ANNEX A — Quick reference</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../release-notes/">Release notes</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Release notes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../news/2025-02-09_02.00.00/">2.0 (2025-02-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2025-01-19_01.04.00/">1.4 (2025-01-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2024-08-01_01.03.00/">1.3 (2024-08-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2024-07-01_01.02.00/">1.2 (2024-07-01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2024-03-29_01.01.00/">1.1 (2024-03-29)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2023-12-22_01.00.00/">1.0 (2023-12-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2023-08-06_00.17.00/">0.17 (2023-08-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2023-05-07_00.16.00/">0.16 (2023-05-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2023-02-12_00.15.00/">0.15 (2023-02-12)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2023-02-05_00.14.00/">0.14 (2023-02-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2022-08-10_00.13.00/">0.13 (2022-08-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2022-05-02_00.12.00/">0.12 (2022-05-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2022-02-26_00.11.00/">0.11 (2022-02-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news/2021-12-31_00.10.00/">0.10 (2021-12-31)</a></li>
</ul>
</li>
</ul>

</div>

<div class="sidebar-scroll">
  <div class="sidebar-tree">
    <hr class="injected-sidebar-tree-spacer" />
    <ul>
      <li><a class="reference external" href="https://releng.io/">releng.io</a></li>
      <li><a class="reference external" href="https://github.com/releng-tool/releng-tool">releng-tool GitHub</a></li>
    </ul>

    <hr class="injected-sidebar-tree-spacer" />
    <div class="injected-sidebar-i8n">
      🕮

      · <a class="notranslate" href="https://docs-develop.releng.io/en/">English</a>

      · <a class="notranslate" href="https://docs-develop.releng.io/de/">Deutsch</a>

      · <a class="notranslate" href="https://docs-develop.releng.io/es/">español</a>

      · <a class="notranslate" href="https://docs-develop.releng.io/ja/">日本語</a>

      · <a class="notranslate" href="https://docs-develop.releng.io/pl/">polski</a>

      · <a class="notranslate" href="https://docs-develop.releng.io/zh_Hans/">中文 (简体)</a>

      · <a class="notranslate" href="https://docs-develop.releng.io/zh_Hant/">中文 (繁體)</a>

    </div>

  </div>
</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/releng-tool/releng-tool-docs/blob/main/content/getting-started/tutorial-toolchain.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/releng-tool/releng-tool-docs/edit/main/content/getting-started/tutorial-toolchain.md" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="tutorial-a-toolchain-example">
<h1>Tutorial “A toolchain example”<a class="headerlink" href="#tutorial-a-toolchain-example" title="Link to this heading">¶</a></h1>
<p>This tutorial shows an example creating an application using a
pre-built toolchain. In this example, we will use a pre-built toolchain
which (in theory) has been used to prepare a Linux image for an embedded
device. With the same toolchain, we can define a releng-tool project that
prepares an application that can run on this embedded device.</p>
<p>This example will attempt to prepare a static build of <a class="reference external" href="https://htop.dev/">htop</a> that
can run on an aarch64 system.</p>
<section id="preparing-the-host-environment">
<h2>Preparing the host environment<a class="headerlink" href="#preparing-the-host-environment" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A releng-tool project may create a package to download/setup a toolchain
package to use for a build. However, for this example, we will keep the
installation/availability of the toolchain outside of the releng-tool
project (for simplicity of this tutorial).</p>
</div>
<p>First, we will prepare a toolchain on a host system to be used by our
releng-tool project. For this tutorial, we will use a
<a class="reference external" href="https://toolchains.bootlin.com/">toolchain provided by Bootlin</a>. Download the following
toolchain package:</p>
<ul class="simple">
<li><p>Architecture: aarch64</p></li>
<li><p>libc: glibc</p></li>
<li><p><a class="reference external" href="https://toolchains.bootlin.com/downloads/releases/toolchains/aarch64/tarballs/aarch64--glibc--stable-2022.08-1.tar.bz2">https://toolchains.bootlin.com/…/aarch64–glibc–stable-2022.08-1.tar.bz2</a></p></li>
<li><p><a class="reference external" href="https://toolchains.bootlin.com/downloads/releases/toolchains/aarch64/tarballs/aarch64--glibc--stable-2022.08-1.sha256">https://toolchains.bootlin.com/…/aarch64–glibc–stable-2022.08-1.sha256</a></p></li>
<li><p>(sha256: <code class="docutils literal notranslate"><span class="pre">844df3c99508030ee9cb1152cb182500bb9816ff01968f2e18591d51d766c9e7</span></code>)</p></li>
</ul>
<p>Extract and place the toolchain into a desired location. In this example,
we will place the toolchain under <code class="docutils literal notranslate"><span class="pre">/opt</span></code>. However, users can install the
toolchain to whatever path they desire:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>tar<span class="w"> </span>-vxf<span class="w"> </span>&lt;toolchain-archive&gt;
<span class="gp">$ </span>mv<span class="w"> </span>aarch64--glibc--stable-2022.08-1<span class="w"> </span>/opt
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>/opt/aarch64--glibc--stable-2022.08-1
<span class="gp">$ </span>relocate-sdk.sh
</pre></div>
</div>
<p>Verify the ability to invoke GCC from the toolchain installation:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>/opt/aarch64--glibc--stable-2022.08-1/bin/aarch64-linux-gcc<span class="w"> </span>--version
<span class="go">aarch64-linux-gcc.br_real (Buildroot 2021.11-4428-g6b6741b) 11.3.0</span>
<span class="go">Copyright (C) 2021 Free Software Foundation, Inc.</span>
<span class="go">This is free software; see the source for copying conditions.  There is NO</span>
<span class="go">warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
</pre></div>
</div>
</section>
<section id="preparing-a-new-releng-tool-project">
<h2>Preparing a new releng-tool project<a class="headerlink" href="#preparing-a-new-releng-tool-project" title="Link to this heading">¶</a></h2>
<p>To build <a class="reference external" href="https://htop.dev/">htop</a>, this requires two dependencies:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://invisible-island.net/ncurses/">Ncurses</a></p></li>
<li><p><a class="reference external" href="https://www.infradead.org/~tgr/libnl/">Netlink Protocol Library Suite (libnl)</a></p></li>
</ul>
<p>Build a new project with the following structure to support our <code class="docutils literal notranslate"><span class="pre">htop</span></code>
package, dependencies and project configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>└── my-tc-project/
    ├── package/
    │   ├── htop/
    │   │   ├── htop.rt
    │   │   └── htop.hash
    │   ├── libnl/
    │   │   ├── libnl.rt
    │   │   └── libnl.hash
    │   └── ncurses/
    │       ├── ncurses.rt
    │       └── ncurses.hash
    └── releng-tool.rt
</pre></div>
</div>
</section>
<section id="the-configuration">
<h2>The configuration<a class="headerlink" href="#the-configuration" title="Link to this heading">¶</a></h2>
<p>The first changes we will make to our releng-tool project is to define the
specifics of the project configuration in <code class="docutils literal notranslate"><span class="pre">releng-tool.rt</span></code>. Apply the
following contents to the configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">packages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;htop&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># location of the toolchain to use</span>
<span class="n">MY_TOOLCHAIN_ROOT</span> <span class="o">=</span> <span class="s1">&#39;/opt/aarch64--glibc--stable-2022.08-1&#39;</span>
<span class="n">MY_TOOLCHAIN_SYSROOT</span> <span class="o">=</span> <span class="n">releng_join</span><span class="p">(</span>
    <span class="n">MY_TOOLCHAIN_ROOT</span><span class="p">,</span> <span class="s1">&#39;aarch64-buildroot-linux-gnu/sysroot&#39;</span><span class="p">)</span>

<span class="c1"># flag buildroot toolchain to be strict with includes</span>
<span class="n">releng_env</span><span class="p">(</span><span class="s1">&#39;BR_COMPILER_PARANOID_UNSAFE_PATH&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>

<span class="n">MY_TOOLCHAIN_CONF_ENV</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># configure compiler/linker options</span>
    <span class="s1">&#39;CC&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">MY_TOOLCHAIN_ROOT</span><span class="si">}</span><span class="s1">/bin/aarch64-linux-gcc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CXX&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">MY_TOOLCHAIN_ROOT</span><span class="si">}</span><span class="s1">/bin/aarch64-linux-g++&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CFLAGS&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;--sysroot=</span><span class="si">{</span><span class="n">MY_TOOLCHAIN_SYSROOT</span><span class="si">}</span><span class="s1"> -I$</span><span class="se">{{</span><span class="s1">STAGING_INCLUDE_DIR</span><span class="se">}}</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CXXLAGS&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;--sysroot=</span><span class="si">{</span><span class="n">MY_TOOLCHAIN_SYSROOT</span><span class="si">}</span><span class="s1"> -I$</span><span class="se">{{</span><span class="s1">STAGING_INCLUDE_DIR</span><span class="se">}}</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="s1">&#39;LDFLAGS&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;--sysroot=</span><span class="si">{</span><span class="n">MY_TOOLCHAIN_SYSROOT</span><span class="si">}</span><span class="s1"> -L$</span><span class="se">{{</span><span class="s1">STAGING_LIB_DIR</span><span class="se">}}</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="c1"># configure pkg-config to use staging directory</span>
    <span class="s1">&#39;PKG_CONFIG_DIR&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PKG_CONFIG_LIBDIR&#39;</span><span class="p">:</span> <span class="s1">&#39;$</span><span class="si">{STAGING_LIB_DIR}</span><span class="s1">/pkgconfig&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PKG_CONFIG_SYSROOT_DIR&#39;</span><span class="p">:</span> <span class="s1">&#39;$</span><span class="si">{STAGING_DIR}</span><span class="s1">&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">MY_TOOLCHAIN_CONF_DEFS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># configure for cross compiling</span>
    <span class="s1">&#39;--host&#39;</span><span class="p">:</span> <span class="s1">&#39;aarch64-buildroot-linux&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Create a package list which defines <code class="docutils literal notranslate"><span class="pre">htop</span></code> as a required package to build.
Since we plan to make <code class="docutils literal notranslate"><span class="pre">libnl</span></code> and <code class="docutils literal notranslate"><span class="pre">ncurses</span></code> dependencies to <code class="docutils literal notranslate"><span class="pre">htop</span></code>, they do
not need to be included.</p></li>
<li><p>This project will rely on the host system having the toolchain installed.
We create some variables to help point to the toolchain’s path and sysroot.
Developers can make this flexible by allowing these options to be
configured by environment variables or using command line arguments, but
this will not be done here to simplify this tutorial.</p></li>
<li><p>We configure <code class="docutils literal notranslate"><span class="pre">BR_COMPILER_PARANOID_UNSAFE_PATH</span></code>, an option supported by
the generated Bootlin (Buildroot) toolchain to error when using an unsafe
path when performing a build (i.e. throw an error when using the system’s
<code class="docutils literal notranslate"><span class="pre">/usr/include</span></code> path over a releng-tool sysroot path).</p></li>
<li><p>Prepares two variables <code class="docutils literal notranslate"><span class="pre">MY_TOOLCHAIN_CONF_ENV</span></code> and <code class="docutils literal notranslate"><span class="pre">MY_TOOLCHAIN_CONF_DEFS</span></code>
which we can later use for the Autotools packages we have. These values
help configure toolchain and desired releng-tool paths. Variables set
in the root configuration can later be used inside package scripts and
post-build scripts. The options specified here are applicable to Autotools
packages. Options can vary for other types (e.g. CMake projects typically
are configured with a CMake toolchain file).</p></li>
</ul>
<p>The releng-tool project’s configuration is ready. Now to define the package
definitions/hashes for each package.</p>
</section>
<section id="the-libnl-package">
<h2>The libnl package<a class="headerlink" href="#the-libnl-package" title="Link to this heading">¶</a></h2>
<p>Update the <code class="docutils literal notranslate"><span class="pre">libnl</span></code> package definition (<code class="docutils literal notranslate"><span class="pre">my-tc-project/libnl/libnl.rt</span></code>) with
the following contents:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LIBNL_INSTALL_TYPE</span> <span class="o">=</span> <span class="s1">&#39;staging&#39;</span>
<span class="n">LIBNL_LICENSE</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;LGPL-2.1-or-later&#39;</span><span class="p">]</span>
<span class="n">LIBNL_LICENSE_FILES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;COPYING&#39;</span><span class="p">]</span>
<span class="n">LIBNL_SITE</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/thom311/libnl/releases/download/libnl3_7_0/libnl-3.7.0.tar.gz&#39;</span>
<span class="n">LIBNL_TYPE</span> <span class="o">=</span> <span class="s1">&#39;autotools&#39;</span>
<span class="n">LIBNL_VERSION</span> <span class="o">=</span> <span class="s1">&#39;3.7.0&#39;</span>

<span class="n">LIBNL_CONF_ENV</span> <span class="o">=</span> <span class="n">MY_TOOLCHAIN_CONF_ENV</span>
<span class="n">LIBNL_CONF_DEFS</span> <span class="o">=</span> <span class="n">MY_TOOLCHAIN_CONF_DEFS</span>

<span class="n">LIBNL_CONF_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># static lib</span>
    <span class="s1">&#39;--enable-static&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-shared&#39;</span><span class="p">,</span>
    <span class="c1"># disable features that are not required</span>
    <span class="s1">&#39;--disable-cli&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-debug&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-pthreads&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<ul>
<li><p>The libnl library uses a LGPL-2.1+ license. We configure <code class="docutils literal notranslate"><span class="pre">LIBNL_LICENSE</span></code>
to the equivalent <a class="reference external" href="https://spdx.org/licenses/">SPDX</a> license identifier, as well as define
<code class="docutils literal notranslate"><span class="pre">LIBNL_LICENSE_FILES</span></code> to point to a copy of the license text. Specifying
license information is not required, but can be helpful when generating
license data or software bill of materials (SBOM) for a project.</p></li>
<li><p>This example uses libnl v3.7.0, which we set in the <code class="docutils literal notranslate"><span class="pre">LIBNL_VERSION</span></code> option.
The version value is useful for managing output folders and logging versions
of packages.</p></li>
<li><p>We specify the location to download sources in <code class="docutils literal notranslate"><span class="pre">LIBNL_SITE</span></code>.</p></li>
<li><p>The libnl library uses Autotools. This means we can use <code class="docutils literal notranslate"><span class="pre">LIBNL_TYPE</span></code> to
configure the helper type and avoid the need to create custom
configure/build scripts to run <code class="docutils literal notranslate"><span class="pre">./configure</span></code>, etc. (since releng-tool
will handle this for us).</p></li>
<li><p>We configure <code class="docutils literal notranslate"><span class="pre">LIBNL_CONF_ENV</span></code> and <code class="docutils literal notranslate"><span class="pre">LIBNL_CONF_DEFS</span></code> to use the configuration
options we prepared in the root configuration. This allows this Autotools
package to use the desired toolchain.</p></li>
<li><p>This package is configured to install (<code class="docutils literal notranslate"><span class="pre">LIBNL_INSTALL_TYPE</span></code>) into the
staging area (instead of, by default, into the target directory). Since
we are creating a static library for <code class="docutils literal notranslate"><span class="pre">htop</span></code> to link against, there is no
need to place any generated content from the <code class="docutils literal notranslate"><span class="pre">libnl</span></code> package into the
target area.</p></li>
<li><p>Finally, we configure <code class="docutils literal notranslate"><span class="pre">LIBNL_CONF_OPTS</span></code> to tweak other options supported
by this package. We only need a static library, so we explicitly indicate
to enable static builds and disable shared builds. We also disable a series
of other features not needed for this example.</p>
<p>Using configuration options can be useful for disabling certain project
options such as disabling unit tests (which may not be desired for these
types of builds). It is always good to explicitly define configuration
entries when possible, just in case default values change for an option.</p>
</li>
</ul>
<p>The above <code class="docutils literal notranslate"><span class="pre">libnl</span></code> package specifies a remote URL to download library
sources. These sources should be validated to ensure data is not corrupted
or manipulated. To do this, create a hash file alongside the package
definition called <code class="docutils literal notranslate"><span class="pre">libnl.hash</span></code> with the contents:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># https://github.com/thom311/libnl/releases/download/libnl3_7_0/libnl-3.7.0.tar.gz.sha256sum
sha256 9fe43ccbeeea72c653bdcf8c93332583135cda46a79507bfd0a483bb57f65939 libnl-3.7.0.tar.gz
# locally computed
sha256 dc626520dcd53a22f727af3ee42c770e56c97a64fe3adb063799d8ab032fe551 COPYING
</pre></div>
</div>
<p>In this hash file, expected hashes for resources can be configured and checked
when releng-tool attempts to fetch resources from remote sources. Ideally,
hashes provided from a third-party package release can be directly added into
these files (<code class="docutils literal notranslate"><span class="pre">&lt;hash-type&gt;</span> <span class="pre">&lt;hash&gt;</span> <span class="pre">&lt;file&gt;</span></code>). In this example, libnl provides
expected hashes for archives when they make a release. We copy the hash
contents into our local hash file (with a helpful comment to indicate where
it came from).</p>
<p>In addition, we also provide a hash of the license document. While not
required, this can be useful in detecting if the license of a package
changes between versions.</p>
</section>
<section id="the-ncurses-package">
<h2>The ncurses package<a class="headerlink" href="#the-ncurses-package" title="Link to this heading">¶</a></h2>
<p>Update the <code class="docutils literal notranslate"><span class="pre">ncurses</span></code> package definition (<code class="docutils literal notranslate"><span class="pre">my-tc-project/ncurses/ncurses.rt</span></code>)
with the following contents:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">NCURSES_INSTALL_TYPE</span> <span class="o">=</span> <span class="s1">&#39;staging&#39;</span>
<span class="n">NCURSES_LICENSE</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;X11&#39;</span><span class="p">]</span>
<span class="n">NCURSES_LICENSE_FILES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;COPYING&#39;</span><span class="p">]</span>
<span class="n">NCURSES_SITE</span> <span class="o">=</span> <span class="s1">&#39;https://invisible-mirror.net/archives/ncurses/ncurses-$</span><span class="si">{NCURSES_VERSION}</span><span class="s1">.tar.gz&#39;</span>
<span class="n">NCURSES_TYPE</span> <span class="o">=</span> <span class="s1">&#39;autotools&#39;</span>
<span class="n">NCURSES_VERSION</span> <span class="o">=</span> <span class="s1">&#39;6.4&#39;</span>

<span class="n">NCURSES_CONF_ENV</span> <span class="o">=</span> <span class="n">MY_TOOLCHAIN_CONF_ENV</span>
<span class="n">NCURSES_CONF_DEFS</span> <span class="o">=</span> <span class="n">MY_TOOLCHAIN_CONF_DEFS</span>

<span class="n">NCURSES_CONF_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># static lib</span>
    <span class="s1">&#39;--with-normal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-shared&#39;</span><span class="p">,</span>
    <span class="c1"># disable features that are not required</span>
    <span class="s1">&#39;--disable-db-install&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-ada&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-curses-h&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-cxx&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-cxx-binding&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-debug&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-gpm&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-manpages&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-progs&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-sysmouse&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-tack&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-tclib&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-termlib&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--without-tests&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The above almost mimics the previous <code class="docutils literal notranslate"><span class="pre">libnl</span></code> package with the exception of
this package having a different license and different configuration options
available.</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">ncurses</span></code> package specifies a remote URL to download library
sources, we also want to update <code class="docutils literal notranslate"><span class="pre">ncurses.hash</span></code> with the contents:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># locally computed after verification with:
#  https://invisible-island.net/archives/ncurses/ncurses-6.4.tar.gz.asc
#  19882D92DDA4C400C22C0D56CC2AF4472167BE03
sha256 6931283d9ac87c5073f30b6290c4c75f21632bb4fc3603ac8100812bed248159 ncurses-6.4.tar.gz
# locally computed
sha256 63de87399e9fc8860236082b6b0520e068e9eb1fad0ebd30202aa30bb6f690ac COPYING
</pre></div>
</div>
<p>In the previous <code class="docutils literal notranslate"><span class="pre">libnl</span></code> package, maintainers provided an official SHA-256
hash to use for our local hash file. For <code class="docutils literal notranslate"><span class="pre">ncurses</span></code>, maintainers provide a
GPG signature of their archives instead. To handle this, we manually
download the archive and signature file to verify its contents. Once
verified, we generated our own SHA-256 sum and place it into this hash file
(with a helpful comment). And as done in the previous package, we also
provide a hash of the license document.</p>
</section>
<section id="the-htop-package">
<h2>The htop package<a class="headerlink" href="#the-htop-package" title="Link to this heading">¶</a></h2>
<p>Update the <code class="docutils literal notranslate"><span class="pre">htop</span></code> package definition (<code class="docutils literal notranslate"><span class="pre">my-tc-project/htop/htop.rt</span></code>) with the
following contents:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">HTOP_NEEDS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;libnl&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ncurses&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">HTOP_LICENSE</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GPL-2.0-or-later&#39;</span><span class="p">]</span>
<span class="n">HTOP_LICENSE_FILES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;COPYING&#39;</span><span class="p">]</span>
<span class="n">HTOP_SITE</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/htop-dev/htop/releases/download/$</span><span class="si">{HTOP_VERSION}</span><span class="s1">/htop-$</span><span class="si">{HTOP_VERSION}</span><span class="s1">.tar.xz&#39;</span>
<span class="n">HTOP_TYPE</span> <span class="o">=</span> <span class="s1">&#39;autotools&#39;</span>
<span class="n">HTOP_VERSION</span> <span class="o">=</span> <span class="s1">&#39;3.2.2&#39;</span>

<span class="n">HTOP_CONF_ENV</span> <span class="o">=</span> <span class="n">MY_TOOLCHAIN_CONF_ENV</span>
<span class="n">HTOP_CONF_DEFS</span> <span class="o">=</span> <span class="n">MY_TOOLCHAIN_CONF_DEFS</span>

<span class="n">HTOP_CONF_OPTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># disable features that are not required</span>
    <span class="s1">&#39;--disable-capabilities&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-dependency-tracking&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-hwloc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-openvz&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-pcp&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-sensors&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-unicode&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--disable-vserver&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>This package defines a list of package dependencies for <code class="docutils literal notranslate"><span class="pre">htop</span></code>.
Specifically, we list <code class="docutils literal notranslate"><span class="pre">libnl</span></code> and <code class="docutils literal notranslate"><span class="pre">ncurses</span></code>, which will force releng-tool
to configure/build these packages before processing the <code class="docutils literal notranslate"><span class="pre">htop</span></code> package.</p></li>
</ul>
<p>Since <code class="docutils literal notranslate"><span class="pre">htop</span></code> package specifies a remote URL to download library sources,
we also want to update <code class="docutils literal notranslate"><span class="pre">htop.hash</span></code> with the contents:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># https://github.com/htop-dev/htop/releases/download/3.2.2/htop-3.2.2.tar.xz.sha256
sha256 bac9e9ab7198256b8802d2e3b327a54804dc2a19b77a5f103645b11c12473dc8 htop-3.2.2.tar.xz
# locally computed
sha256 8177f97513213526df2cf6184d8ff986c675afb514d4e68a404010521b880643 COPYING
</pre></div>
</div>
</section>
<section id="performing-a-build">
<h2>Performing a build<a class="headerlink" href="#performing-a-build" title="Link to this heading">¶</a></h2>
<p>With a configuration and packages prepared, the project should be ready to
be built. While in the <code class="docutils literal notranslate"><span class="pre">my-tc-project</span></code> folder, invoke <code class="docutils literal notranslate"><span class="pre">releng-tool</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>releng-tool
<span class="go">fetching libnl...</span>
<span class="go">configuring libnl...</span>
<span class="go">building libnl...</span>
<span class="go">...</span>
<span class="go">building htop...</span>
<span class="go">installing htop...</span>
<span class="go">generating sbom information...</span>
<span class="go">generating license information...</span>
<span class="gp gp-VirtualEnv">(success)</span> <span class="go">completed (0:01:15)</span>
</pre></div>
</div>
<p>Once completed, the target directory will have a compiled <code class="docutils literal notranslate"><span class="pre">htop</span></code> executable
that can be copied over to and run on an aarch64-running target.</p>
<p>This concludes this tutorial.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../rebuilds/">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Understanding rebuilds</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../tutorial-sdl/">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Tutorial “An SDL example”</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/releng-tool/releng-tool" aria-label="GitHub">
<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
</svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Tutorial “A toolchain example”</a><ul>
<li><a class="reference internal" href="#preparing-the-host-environment">Preparing the host environment</a></li>
<li><a class="reference internal" href="#preparing-a-new-releng-tool-project">Preparing a new releng-tool project</a></li>
<li><a class="reference internal" href="#the-configuration">The configuration</a></li>
<li><a class="reference internal" href="#the-libnl-package">The libnl package</a></li>
<li><a class="reference internal" href="#the-ncurses-package">The ncurses package</a></li>
<li><a class="reference internal" href="#the-htop-package">The htop package</a></li>
<li><a class="reference internal" href="#performing-a-build">Performing a build</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=7a06361e"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../../_static/tabs.js?v=3ee01567"></script>
    </body>
</html>